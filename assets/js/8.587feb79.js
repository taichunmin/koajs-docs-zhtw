(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{56:function(t,s,e){"use strict";e.r(s);var a=e(0),n=Object(a.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"response"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response","aria-hidden":"true"}},[t._v("#")]),t._v(" Response")]),t._v(" "),e("p",[t._v("A Koa "),e("code",[t._v("Response")]),t._v(" object is an abstraction on top of node's vanilla response object,\nproviding additional functionality that is useful for every day HTTP server\ndevelopment.")]),t._v(" "),e("h2",{attrs:{id:"api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#api","aria-hidden":"true"}},[t._v("#")]),t._v(" API")]),t._v(" "),e("h3",{attrs:{id:"response-header"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-header","aria-hidden":"true"}},[t._v("#")]),t._v(" response.header")]),t._v(" "),e("p",[t._v("Response header object.")]),t._v(" "),e("h3",{attrs:{id:"response-headers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-headers","aria-hidden":"true"}},[t._v("#")]),t._v(" response.headers")]),t._v(" "),e("p",[t._v("Response header object. Alias as "),e("code",[t._v("response.header")]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"response-socket"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-socket","aria-hidden":"true"}},[t._v("#")]),t._v(" response.socket")]),t._v(" "),e("p",[t._v("Request socket.")]),t._v(" "),e("h3",{attrs:{id:"response-status"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-status","aria-hidden":"true"}},[t._v("#")]),t._v(" response.status")]),t._v(" "),e("p",[t._v("Get response status. By default, "),e("code",[t._v("response.status")]),t._v(" is set to "),e("code",[t._v("404")]),t._v(" unlike node's "),e("code",[t._v("res.statusCode")]),t._v(" which defaults to "),e("code",[t._v("200")]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"response-status-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-status-2","aria-hidden":"true"}},[t._v("#")]),t._v(" response.status=")]),t._v(" "),e("p",[t._v("Set response status via numeric code:")]),t._v(" "),e("ul",[e("li",[t._v('100 "continue"')]),t._v(" "),e("li",[t._v('101 "switching protocols"')]),t._v(" "),e("li",[t._v('102 "processing"')]),t._v(" "),e("li",[t._v('200 "ok"')]),t._v(" "),e("li",[t._v('201 "created"')]),t._v(" "),e("li",[t._v('202 "accepted"')]),t._v(" "),e("li",[t._v('203 "non-authoritative information"')]),t._v(" "),e("li",[t._v('204 "no content"')]),t._v(" "),e("li",[t._v('205 "reset content"')]),t._v(" "),e("li",[t._v('206 "partial content"')]),t._v(" "),e("li",[t._v('207 "multi-status"')]),t._v(" "),e("li",[t._v('208 "already reported"')]),t._v(" "),e("li",[t._v('226 "im used"')]),t._v(" "),e("li",[t._v('300 "multiple choices"')]),t._v(" "),e("li",[t._v('301 "moved permanently"')]),t._v(" "),e("li",[t._v('302 "found"')]),t._v(" "),e("li",[t._v('303 "see other"')]),t._v(" "),e("li",[t._v('304 "not modified"')]),t._v(" "),e("li",[t._v('305 "use proxy"')]),t._v(" "),e("li",[t._v('307 "temporary redirect"')]),t._v(" "),e("li",[t._v('308 "permanent redirect"')]),t._v(" "),e("li",[t._v('400 "bad request"')]),t._v(" "),e("li",[t._v('401 "unauthorized"')]),t._v(" "),e("li",[t._v('402 "payment required"')]),t._v(" "),e("li",[t._v('403 "forbidden"')]),t._v(" "),e("li",[t._v('404 "not found"')]),t._v(" "),e("li",[t._v('405 "method not allowed"')]),t._v(" "),e("li",[t._v('406 "not acceptable"')]),t._v(" "),e("li",[t._v('407 "proxy authentication required"')]),t._v(" "),e("li",[t._v('408 "request timeout"')]),t._v(" "),e("li",[t._v('409 "conflict"')]),t._v(" "),e("li",[t._v('410 "gone"')]),t._v(" "),e("li",[t._v('411 "length required"')]),t._v(" "),e("li",[t._v('412 "precondition failed"')]),t._v(" "),e("li",[t._v('413 "payload too large"')]),t._v(" "),e("li",[t._v('414 "uri too long"')]),t._v(" "),e("li",[t._v('415 "unsupported media type"')]),t._v(" "),e("li",[t._v('416 "range not satisfiable"')]),t._v(" "),e("li",[t._v('417 "expectation failed"')]),t._v(" "),e("li",[t._v('418 "I\'m a teapot"')]),t._v(" "),e("li",[t._v('422 "unprocessable entity"')]),t._v(" "),e("li",[t._v('423 "locked"')]),t._v(" "),e("li",[t._v('424 "failed dependency"')]),t._v(" "),e("li",[t._v('426 "upgrade required"')]),t._v(" "),e("li",[t._v('428 "precondition required"')]),t._v(" "),e("li",[t._v('429 "too many requests"')]),t._v(" "),e("li",[t._v('431 "request header fields too large"')]),t._v(" "),e("li",[t._v('500 "internal server error"')]),t._v(" "),e("li",[t._v('501 "not implemented"')]),t._v(" "),e("li",[t._v('502 "bad gateway"')]),t._v(" "),e("li",[t._v('503 "service unavailable"')]),t._v(" "),e("li",[t._v('504 "gateway timeout"')]),t._v(" "),e("li",[t._v('505 "http version not supported"')]),t._v(" "),e("li",[t._v('506 "variant also negotiates"')]),t._v(" "),e("li",[t._v('507 "insufficient storage"')]),t._v(" "),e("li",[t._v('508 "loop detected"')]),t._v(" "),e("li",[t._v('510 "not extended"')]),t._v(" "),e("li",[t._v('511 "network authentication required"')])]),t._v(" "),e("p",[e("strong",[t._v("NOTE")]),t._v(": don't worry too much about memorizing these strings,\nif you have a typo an error will be thrown, displaying this list\nso you can make a correction.")]),t._v(" "),e("h3",{attrs:{id:"response-message"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-message","aria-hidden":"true"}},[t._v("#")]),t._v(" response.message")]),t._v(" "),e("p",[t._v("Get response status message. By default, "),e("code",[t._v("response.message")]),t._v(" is\nassociated with "),e("code",[t._v("response.status")]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"response-message-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-message-2","aria-hidden":"true"}},[t._v("#")]),t._v(" response.message=")]),t._v(" "),e("p",[t._v("Set response status message to the given value.")]),t._v(" "),e("h3",{attrs:{id:"response-length"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-length","aria-hidden":"true"}},[t._v("#")]),t._v(" response.length=")]),t._v(" "),e("p",[t._v("Set response Content-Length to the given value.")]),t._v(" "),e("h3",{attrs:{id:"response-length-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-length-2","aria-hidden":"true"}},[t._v("#")]),t._v(" response.length")]),t._v(" "),e("p",[t._v("Return response Content-Length as a number when present, or deduce\nfrom "),e("code",[t._v("ctx.body")]),t._v(" when possible, or "),e("code",[t._v("undefined")]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"response-body"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-body","aria-hidden":"true"}},[t._v("#")]),t._v(" response.body")]),t._v(" "),e("p",[t._v("Get response body.")]),t._v(" "),e("h3",{attrs:{id:"response-body-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-body-2","aria-hidden":"true"}},[t._v("#")]),t._v(" response.body=")]),t._v(" "),e("p",[t._v("Set response body to one of the following:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("string")]),t._v(" written")]),t._v(" "),e("li",[e("code",[t._v("Buffer")]),t._v(" written")]),t._v(" "),e("li",[e("code",[t._v("Stream")]),t._v(" piped")]),t._v(" "),e("li",[e("code",[t._v("Object")]),t._v(" || "),e("code",[t._v("Array")]),t._v(" json-stringified")]),t._v(" "),e("li",[e("code",[t._v("null")]),t._v(" no content response")])]),t._v(" "),e("p",[t._v("If "),e("code",[t._v("response.status")]),t._v(" has not been set, Koa will automatically set the status to "),e("code",[t._v("200")]),t._v(" or "),e("code",[t._v("204")]),t._v(".")]),t._v(" "),e("p",[t._v("Koa doesn't guard against everything that could be put as a response body -- a function doesn't serialise meaningfully, returning a boolean may make sense based on your application, and while an error works, it may not work as intended as some properties of an error are not enumerable.  We recommend adding middleware in your app that asserts body types per app.  A sample middleware might be:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("app.use(async (ctx, next) => {\n  await next()\n\n  ctx.assert.equal('object', typeof ctx, 500, 'some dev did something wrong')\n})\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("h4",{attrs:{id:"string"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#string","aria-hidden":"true"}},[t._v("#")]),t._v(" String")]),t._v(" "),e("p",[t._v("The Content-Type is defaulted to text/html or text/plain, both with\na default charset of utf-8. The Content-Length field is also set.")]),t._v(" "),e("h4",{attrs:{id:"buffer"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#buffer","aria-hidden":"true"}},[t._v("#")]),t._v(" Buffer")]),t._v(" "),e("p",[t._v("The Content-Type is defaulted to application/octet-stream, and Content-Length\nis also set.")]),t._v(" "),e("h4",{attrs:{id:"stream"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#stream","aria-hidden":"true"}},[t._v("#")]),t._v(" Stream")]),t._v(" "),e("p",[t._v("The Content-Type is defaulted to application/octet-stream.")]),t._v(" "),e("p",[t._v("Whenever a stream is set as the response body, "),e("code",[t._v(".onerror")]),t._v(" is automatically added as a listener to the "),e("code",[t._v("error")]),t._v(" event to catch any errors.\nIn addition, whenever the request is closed (even prematurely), the stream is destroyed.\nIf you do not want these two features, do not set the stream as the body directly.\nFor example, you may not want this when setting the body as an HTTP stream in a proxy as it would destroy the underlying connection.")]),t._v(" "),e("p",[t._v("See: https://github.com/koajs/koa/pull/612 for more information.")]),t._v(" "),e("p",[t._v("Here's an example of stream error handling without automatically destroying the stream:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" PassThrough "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stream'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PassThrough"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" ctx "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" someHTTPStream"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onerror"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("PassThrough")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("h4",{attrs:{id:"object"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#object","aria-hidden":"true"}},[t._v("#")]),t._v(" Object")]),t._v(" "),e("p",[t._v("The Content-Type is defaulted to application/json. This includes plain objects "),e("code",[t._v("{ foo: 'bar' }")]),t._v(" and arrays "),e("code",[t._v("['foo', 'bar']")]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"response-get-field"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-get-field","aria-hidden":"true"}},[t._v("#")]),t._v(" response.get(field)")]),t._v(" "),e("p",[t._v("Get a response header field value with case-insensitive "),e("code",[t._v("field")]),t._v(".")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" etag "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ETag'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"response-set-field-value"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-set-field-value","aria-hidden":"true"}},[t._v("#")]),t._v(" response.set(field, value)")]),t._v(" "),e("p",[t._v("Set response header "),e("code",[t._v("field")]),t._v(" to "),e("code",[t._v("value")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Cache-Control'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'no-cache'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"response-append-field-value"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-append-field-value","aria-hidden":"true"}},[t._v("#")]),t._v(" response.append(field, value)")]),t._v(" "),e("p",[t._v("Append additional header "),e("code",[t._v("field")]),t._v(" with value "),e("code",[t._v("val")]),t._v(".")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Link'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<http://127.0.0.1/>'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"response-set-fields"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-set-fields","aria-hidden":"true"}},[t._v("#")]),t._v(" response.set(fields)")]),t._v(" "),e("p",[t._v("Set several response header "),e("code",[t._v("fields")]),t._v(" with an object:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Etag'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1234'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Last-Modified'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" date\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("p",[t._v("This delegates to "),e("a",{attrs:{href:"https://nodejs.org/dist/latest/docs/api/http.html#http_request_setheader_name_value",target:"_blank",rel:"noopener noreferrer"}},[t._v("setHeader"),e("OutboundLink")],1),t._v(" which sets or updates headers by specified keys and doesn't reset the entire header.")]),t._v(" "),e("h3",{attrs:{id:"response-remove-field"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-remove-field","aria-hidden":"true"}},[t._v("#")]),t._v(" response.remove(field)")]),t._v(" "),e("p",[t._v("Remove header "),e("code",[t._v("field")]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"response-type"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-type","aria-hidden":"true"}},[t._v("#")]),t._v(" response.type")]),t._v(" "),e("p",[t._v("Get response "),e("code",[t._v("Content-Type")]),t._v(' void of parameters such as "charset".')]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ct "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// => "image/png"')]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("h3",{attrs:{id:"response-type-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-type-2","aria-hidden":"true"}},[t._v("#")]),t._v(" response.type=")]),t._v(" "),e("p",[t._v("Set response "),e("code",[t._v("Content-Type")]),t._v(" via mime string or file extension.")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/plain; charset=utf-8'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'image/png'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.png'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'png'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("p",[t._v("Note: when appropriate a "),e("code",[t._v("charset")]),t._v(" is selected for you, for\nexample "),e("code",[t._v("response.type = 'html'")]),t._v(' will default to "utf-8". If you need to overwrite '),e("code",[t._v("charset")]),t._v(",\nuse "),e("code",[t._v("ctx.set('Content-Type', 'text/html')")]),t._v(" to set response header field to value directly.")]),t._v(" "),e("h3",{attrs:{id:"response-is-types"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-is-types","aria-hidden":"true"}},[t._v("#")]),t._v(" response.is(types...)")]),t._v(" "),e("p",[t._v("Very similar to "),e("code",[t._v("ctx.request.is()")]),t._v(".\nCheck whether the response type is one of the supplied types.\nThis is particularly useful for creating middleware that\nmanipulate responses.")]),t._v(" "),e("p",[t._v("For example, this is a middleware that minifies\nall HTML responses except for streams.")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" minify "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'html-minifier'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("is")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'html'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" body "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("body "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" body"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pipe"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Buffer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("isBuffer")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("body"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" body "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" body"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("minify")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("body"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br")])]),e("h3",{attrs:{id:"response-redirect-url-alt"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-redirect-url-alt","aria-hidden":"true"}},[t._v("#")]),t._v(" response.redirect(url, [alt])")]),t._v(" "),e("p",[t._v("Perform a [302] redirect to "),e("code",[t._v("url")]),t._v(".")]),t._v(" "),e("p",[t._v('The string "back" is special-cased\nto provide Referrer support, when Referrer\nis not present '),e("code",[t._v("alt")]),t._v(' or "/" is used.')]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'back'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'back'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/index.html'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/login'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://google.com'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("p",[t._v("To alter the default status of "),e("code",[t._v("302")]),t._v(", simply assign the status\nbefore or after this call. To alter the body, assign it after this call:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("301")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/cart'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Redirecting to shopping cart'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("h3",{attrs:{id:"response-attachment-filename-options"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-attachment-filename-options","aria-hidden":"true"}},[t._v("#")]),t._v(" response.attachment([filename], [options])")]),t._v(" "),e("p",[t._v("Set "),e("code",[t._v("Content-Disposition")]),t._v(' to "attachment" to signal the client\nto prompt for download. Optionally specify the '),e("code",[t._v("filename")]),t._v(" of the\ndownload and some "),e("a",{attrs:{href:"https://github.com/jshttp/content-disposition#options",target:"_blank",rel:"noopener noreferrer"}},[t._v("options"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"response-headersent"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-headersent","aria-hidden":"true"}},[t._v("#")]),t._v(" response.headerSent")]),t._v(" "),e("p",[t._v("Check if a response header has already been sent. Useful for seeing\nif the client may be notified on error.")]),t._v(" "),e("h3",{attrs:{id:"response-lastmodified"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-lastmodified","aria-hidden":"true"}},[t._v("#")]),t._v(" response.lastModified")]),t._v(" "),e("p",[t._v("Return the "),e("code",[t._v("Last-Modified")]),t._v(" header as a "),e("code",[t._v("Date")]),t._v(", if it exists.")]),t._v(" "),e("h3",{attrs:{id:"response-lastmodified-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-lastmodified-2","aria-hidden":"true"}},[t._v("#")]),t._v(" response.lastModified=")]),t._v(" "),e("p",[t._v("Set the "),e("code",[t._v("Last-Modified")]),t._v(" header as an appropriate UTC string.\nYou can either set it as a "),e("code",[t._v("Date")]),t._v(" or date string.")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastModified "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"response-etag"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-etag","aria-hidden":"true"}},[t._v("#")]),t._v(" response.etag=")]),t._v(" "),e("p",[t._v("Set the ETag of a response including the wrapped "),e("code",[t._v('"')]),t._v("s.\nNote that there is no corresponding "),e("code",[t._v("response.etag")]),t._v(" getter.")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("etag "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" crypto"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("createHash")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'md5'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("digest")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hex'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"response-vary-field"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-vary-field","aria-hidden":"true"}},[t._v("#")]),t._v(" response.vary(field)")]),t._v(" "),e("p",[t._v("Vary on "),e("code",[t._v("field")]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"response-flushheaders"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-flushheaders","aria-hidden":"true"}},[t._v("#")]),t._v(" response.flushHeaders()")]),t._v(" "),e("p",[t._v("Flush any set headers, and begin the body.")])])},[],!1,null,null,null);s.default=n.exports}}]);